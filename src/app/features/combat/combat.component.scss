// ============================================================================
// COMBAT PAGE STYLES
// ============================================================================

@use 'styles/abstracts/variables' as *;
@use 'styles/abstracts/mixins' as *;

// ============================================================================
// LAYOUT VARIABLES
// ============================================================================

$header-height-mobile: 56px;
$header-height-desktop: 60px;
$aside-width: 380px;
$aside-max-width: 420px;

// ============================================================================
// PAGE CONTAINER
// ============================================================================

.combat-page {
  min-height: 100vh;
  padding: $spacing-4;
  background-color: var(--color-bg);

  @include respond-to('md') {
    padding: $spacing-6;
  }

  @include respond-to('lg') {
    padding: $spacing-8;
  }
}

// ============================================================================
// MAIN LAYOUT GRID
// ============================================================================

.combat-layout {
  display: flex;
  flex-direction: column;
  gap: $spacing-5;
  max-width: 1600px;
  margin: 0 auto;

  @include respond-to('lg') {
    display: grid;
    grid-template-columns: 1fr minmax($aside-width, $aside-max-width);
    align-items: start;
    gap: $spacing-6;
  }

  @include respond-to('xl') {
    gap: $spacing-8;
  }
}

// ============================================================================
// PRIMARY PANEL - Dice Calculator
// ============================================================================

.combat-primary {
  min-width: 0; // Prevent grid blowout
}

// ============================================================================
// ASIDE PANEL - Initiative Tracker
// ============================================================================

.combat-aside {
  // On mobile, appears after calculator (natural order)
  min-width: 0;

  @include respond-to('lg') {
    position: sticky;
    // Account for header + spacing
    top: calc(#{$header-height-desktop} + #{$spacing-4});
    max-height: calc(100vh - #{$header-height-desktop} - #{$spacing-8});
    overflow-y: auto;
    overscroll-behavior: contain;

    // Subtle scrollbar styling
    &::-webkit-scrollbar {
      width: 6px;
    }

    &::-webkit-scrollbar-track {
      background: transparent;
    }

    &::-webkit-scrollbar-thumb {
      background: var(--color-border);
      border-radius: $border-radius-full;

      &:hover {
        background: var(--color-border-strong);
      }
    }
  }
}

// ============================================================================
// RESPONSIVE ADJUSTMENTS
// ============================================================================

@include respond-below('md') {
  .combat-page {
    padding: $spacing-3;
  }
}
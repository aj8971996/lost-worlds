// ============================================================================
// CREATE CHARACTER COMPONENT STYLES
// Dark fantasy aesthetic with multi-step wizard
// ============================================================================

// Theme Variables
$color-bg-primary: #0a0f1a;
$color-bg-secondary: #111827;
$color-bg-card: #1a2234;
$color-bg-elevated: #1e293b;
$color-border: #2d3a4f;
$color-border-light: #3d4a5f;

$color-text-primary: #e8eaed;
$color-text-secondary: #94a3b8;
$color-text-muted: #64748b;

$color-accent: #60a5fa;
$color-accent-hover: #93c5fd;
$color-success: #10b981;
$color-warning: #f59e0b;
$color-danger: #ef4444;

$color-cosmic: #9370db;
$color-earthly: #4caf50;
$color-dead: #b71c1c;

$color-health: #ef4444;
$color-stamina: #22c55e;
$color-sanity: #a855f7;

$font-display: 'Cinzel', 'Palatino Linotype', serif;
$font-body: 'Source Sans Pro', 'Segoe UI', sans-serif;

$radius-sm: 4px;
$radius-md: 8px;
$radius-lg: 12px;
$radius-xl: 16px;

$shadow-sm: 0 2px 4px rgba(0, 0, 0, 0.3);
$shadow-md: 0 4px 12px rgba(0, 0, 0, 0.4);
$shadow-lg: 0 8px 24px rgba(0, 0, 0, 0.5);
$shadow-glow: 0 0 20px rgba(96, 165, 250, 0.2);

$transition-fast: 0.15s ease;
$transition-normal: 0.25s ease;
$transition-slow: 0.4s ease;

// ============================================================================
// PAGE LAYOUT
// ============================================================================

.create-character-page {
  min-height: 100vh;
  background: linear-gradient(180deg, $color-bg-primary 0%, darken($color-bg-primary, 3%) 100%);
  padding-bottom: 3rem;
}

// Breadcrumb
.breadcrumb-nav {
  padding: 1rem 2rem;
  background: rgba($color-bg-secondary, 0.8);
  border-bottom: 1px solid $color-border;
  
  .breadcrumb-container {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    max-width: 1400px;
    margin: 0 auto;
    font-size: 0.875rem;
  }
  
  .breadcrumb-link {
    display: flex;
    align-items: center;
    gap: 0.25rem;
    color: $color-text-secondary;
    text-decoration: none;
    transition: color $transition-fast;
    
    &:hover {
      color: $color-accent;
    }
    
    .material-symbols-outlined {
      font-size: 1rem;
    }
  }
  
  .breadcrumb-separator {
    color: $color-text-muted;
    font-size: 1rem;
  }
  
  .breadcrumb-current {
    color: $color-text-primary;
    font-weight: 500;
  }
}

// Header
.page-header {
  position: relative;
  padding: 3rem 2rem;
  text-align: center;
  background: linear-gradient(180deg, rgba($color-accent, 0.05) 0%, transparent 100%);
  border-bottom: 1px solid $color-border;
  overflow: hidden;
  
  .header-content {
    position: relative;
    z-index: 1;
  }
  
  .header-icon {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 80px;
    height: 80px;
    margin-bottom: 1rem;
    background: linear-gradient(135deg, $color-accent 0%, darken($color-accent, 15%) 100%);
    border-radius: 50%;
    box-shadow: $shadow-glow;
    
    .material-symbols-outlined {
      font-size: 2.5rem;
      color: white;
    }
  }
  
  .page-title {
    font-family: $font-display;
    font-size: 2.5rem;
    font-weight: 600;
    color: $color-text-primary;
    margin: 0 0 0.5rem;
    letter-spacing: 0.02em;
  }
  
  .page-subtitle {
    font-size: 1.125rem;
    color: $color-text-secondary;
    margin: 0;
  }
  
  .header-decoration {
    position: absolute;
    inset: 0;
    background: 
      radial-gradient(ellipse at 50% 0%, rgba($color-accent, 0.1) 0%, transparent 70%);
    pointer-events: none;
  }
}

// Loading State
.loading-state {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 4rem 2rem;
  gap: 1rem;
  
  .loading-spinner {
    .material-symbols-outlined {
      font-size: 3rem;
      color: $color-accent;
      animation: spin 1s linear infinite;
    }
  }
  
  p {
    color: $color-text-secondary;
    font-size: 1rem;
  }
}

@keyframes spin {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

// ============================================================================
// WIZARD CONTAINER
// ============================================================================

.wizard-container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 2rem;
}

// Step Indicator
.step-indicator {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0;
  padding: 1.5rem;
  margin-bottom: 2rem;
  background: $color-bg-card;
  border-radius: $radius-lg;
  border: 1px solid $color-border;
  overflow-x: auto;
  
  .step-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 0.5rem;
    padding: 0.75rem 1rem;
    background: none;
    border: none;
    cursor: default;
    transition: all $transition-normal;
    
    &.clickable {
      cursor: pointer;
      
      &:hover .step-icon {
        background: rgba($color-accent, 0.2);
        border-color: $color-accent;
      }
    }
    
    &.active {
      .step-icon {
        background: $color-accent;
        border-color: $color-accent;
        color: white;
        box-shadow: $shadow-glow;
      }
      
      .step-label {
        color: $color-text-primary;
        font-weight: 600;
      }
    }
    
    &.completed {
      .step-icon {
        background: $color-success;
        border-color: $color-success;
        color: white;
      }
      
      .step-label {
        color: $color-success;
      }
    }
  }
  
  .step-icon {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 44px;
    height: 44px;
    border-radius: 50%;
    background: $color-bg-elevated;
    border: 2px solid $color-border;
    color: $color-text-secondary;
    transition: all $transition-normal;
    
    .material-symbols-outlined {
      font-size: 1.25rem;
    }
  }
  
  .step-label {
    font-size: 0.75rem;
    color: $color-text-muted;
    white-space: nowrap;
    transition: color $transition-fast;
  }
  
  .step-connector {
    width: 40px;
    height: 2px;
    background: $color-border;
    margin: 0 0.25rem;
    margin-bottom: 1.5rem;
    transition: background $transition-normal;
    
    &.completed {
      background: $color-success;
    }
  }
}

// ============================================================================
// STEP CONTENT
// ============================================================================

.step-content {
  background: $color-bg-card;
  border-radius: $radius-lg;
  border: 1px solid $color-border;
  padding: 2rem;
  margin-bottom: 1.5rem;
  min-height: 400px;
}

.wizard-step {
  animation: fadeIn 0.3s ease;
}

@keyframes fadeIn {
  from { 
    opacity: 0; 
    transform: translateY(10px); 
  }
  to { 
    opacity: 1; 
    transform: translateY(0); 
  }
}

.step-title {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  font-family: $font-display;
  font-size: 1.5rem;
  font-weight: 600;
  color: $color-text-primary;
  margin: 0 0 0.5rem;
  
  .material-symbols-outlined {
    font-size: 1.75rem;
    color: $color-accent;
  }
}

.step-description {
  color: $color-text-secondary;
  margin: 0 0 2rem;
  font-size: 0.95rem;
  
  .highlight {
    color: $color-accent;
  }
}

// ============================================================================
// FORM ELEMENTS
// ============================================================================

.form-grid {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 1.5rem;
  
  @media (max-width: 768px) {
    grid-template-columns: 1fr 1fr;
  }
  
  @media (max-width: 480px) {
    grid-template-columns: 1fr;
  }
}

.form-group {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
  
  &.span-2 {
    grid-column: span 2;
  }
  
  label {
    font-size: 0.875rem;
    font-weight: 500;
    color: $color-text-secondary;
  }
}

.form-input,
.form-select {
  padding: 0.75rem 1rem;
  background: $color-bg-elevated;
  border: 1px solid $color-border;
  border-radius: $radius-md;
  color: $color-text-primary;
  font-size: 1rem;
  transition: all $transition-fast;
  
  &:focus {
    outline: none;
    border-color: $color-accent;
    box-shadow: 0 0 0 3px rgba($color-accent, 0.15);
  }
  
  &::placeholder {
    color: $color-text-muted;
  }
}

.form-select {
  cursor: pointer;
  
  option {
    background: $color-bg-secondary;
    color: $color-text-primary;
  }
}

// Species Info
.species-info {
  margin-top: 1rem;
  padding: 1rem;
  background: rgba($color-accent, 0.05);
  border: 1px solid rgba($color-accent, 0.2);
  border-radius: $radius-md;
  
  .species-description {
    color: $color-text-secondary;
    font-size: 0.9rem;
    margin: 0 0 0.75rem;
  }
  
  .species-traits,
  .species-bonuses {
    font-size: 0.85rem;
    color: $color-text-secondary;
    margin-top: 0.5rem;
    
    strong {
      color: $color-text-primary;
    }
  }
  
  .trait-list {
    margin-left: 0.5rem;
  }
  
  .bonus-tag {
    display: inline-block;
    padding: 0.2rem 0.5rem;
    margin-left: 0.5rem;
    background: rgba($color-success, 0.2);
    border-radius: $radius-sm;
    color: $color-success;
    font-weight: 500;
  }
}

// ============================================================================
// STATS SECTION
// ============================================================================

.stats-container {
  display: flex;
  flex-direction: column;
  gap: 2rem;
}

.stat-category {
  .category-title {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 1.1rem;
    font-weight: 600;
    margin: 0 0 1rem;
    padding-bottom: 0.5rem;
    border-bottom: 2px solid;
    
    &.physical {
      color: $color-health;
      border-color: rgba($color-health, 0.3);
    }
    
    &.mental {
      color: $color-accent;
      border-color: rgba($color-accent, 0.3);
    }
    
    &.magical {
      color: $color-cosmic;
      border-color: rgba($color-cosmic, 0.3);
    }
    
    .material-symbols-outlined {
      font-size: 1.25rem;
    }
  }
}

.stats-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
  gap: 1rem;
}

.stat-card {
  background: $color-bg-elevated;
  border: 1px solid $color-border;
  border-radius: $radius-md;
  padding: 1rem;
  transition: all $transition-fast;
  
  &:hover {
    border-color: $color-border-light;
  }
  
  .stat-header {
    display: flex;
    align-items: baseline;
    gap: 0.5rem;
    margin-bottom: 0.75rem;
    
    .stat-abbr {
      font-family: $font-display;
      font-size: 1.25rem;
      font-weight: 700;
      color: $color-accent;
    }
    
    .stat-name {
      font-size: 0.875rem;
      color: $color-text-secondary;
    }
  }
  
  .stat-inputs {
    display: flex;
    gap: 0.75rem;
    margin-bottom: 0.75rem;
    
    .input-group {
      flex: 1;
      
      label {
        display: block;
        font-size: 0.7rem;
        color: $color-text-muted;
        margin-bottom: 0.25rem;
        text-transform: uppercase;
        letter-spacing: 0.05em;
      }
    }
  }
  
  .stat-input {
    width: 100%;
    padding: 0.5rem;
    background: $color-bg-card;
    border: 1px solid $color-border;
    border-radius: $radius-sm;
    color: $color-text-primary;
    font-size: 1rem;
    text-align: center;
    
    &:focus {
      outline: none;
      border-color: $color-accent;
    }
  }
  
  .stat-derived {
    display: flex;
    justify-content: space-around;
    padding-top: 0.5rem;
    border-top: 1px solid $color-border;
    
    .derived-item {
      display: flex;
      align-items: center;
      gap: 0.25rem;
      font-size: 0.85rem;
      color: $color-text-secondary;
      
      .material-symbols-outlined {
        font-size: 1rem;
        color: $color-text-muted;
      }
    }
  }
}

// Resources & Components
.resources-section,
.components-section,
.combat-section {
  margin-top: 2rem;
  padding-top: 2rem;
  border-top: 1px solid $color-border;
  
  .section-title {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 1.1rem;
    font-weight: 600;
    color: $color-text-primary;
    margin: 0 0 1rem;
    
    .material-symbols-outlined {
      color: $color-accent;
    }
  }
}

.resources-grid,
.components-grid,
.combat-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
  gap: 1rem;
}

.resource-card,
.component-card,
.combat-card {
  background: $color-bg-elevated;
  border: 1px solid $color-border;
  border-radius: $radius-md;
  padding: 1rem;
  
  label {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 0.875rem;
    font-weight: 500;
    color: $color-text-secondary;
    margin-bottom: 0.5rem;
    
    .material-symbols-outlined {
      font-size: 1rem;
    }
  }
  
  &.health label { color: $color-health; }
  &.stamina label { color: $color-stamina; }
  &.sanity label { color: $color-sanity; }
  
  .resource-inputs {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    
    input {
      flex: 1;
      padding: 0.5rem;
      background: $color-bg-card;
      border: 1px solid $color-border;
      border-radius: $radius-sm;
      color: $color-text-primary;
      font-size: 0.95rem;
      text-align: center;
      
      &:focus {
        outline: none;
        border-color: $color-accent;
      }
    }
    
    span {
      color: $color-text-muted;
    }
  }
}

.combat-card {
  input {
    width: 100%;
    padding: 0.5rem;
    background: $color-bg-card;
    border: 1px solid $color-border;
    border-radius: $radius-sm;
    color: $color-text-primary;
    font-size: 1rem;
    text-align: center;
    
    &:focus {
      outline: none;
      border-color: $color-accent;
    }
  }
}

// ============================================================================
// SKILLS SECTION
// ============================================================================

.skills-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
  gap: 1rem;
}

.skill-card {
  display: flex;
  align-items: center;
  gap: 1rem;
  padding: 1rem;
  background: $color-bg-elevated;
  border: 1px solid $color-border;
  border-radius: $radius-md;
  transition: all $transition-fast;
  
  &.has-points {
    border-color: rgba($color-accent, 0.4);
    background: rgba($color-accent, 0.05);
  }
  
  .skill-info {
    flex: 1;
    min-width: 0;
    
    .skill-name {
      display: block;
      font-weight: 600;
      color: $color-text-primary;
      margin-bottom: 0.25rem;
    }
    
    .skill-description {
      display: block;
      font-size: 0.8rem;
      color: $color-text-muted;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
  }
  
  .skill-controls {
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }
  
  .skill-btn {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 32px;
    height: 32px;
    background: $color-bg-card;
    border: 1px solid $color-border;
    border-radius: $radius-sm;
    color: $color-text-secondary;
    cursor: pointer;
    transition: all $transition-fast;
    
    &:hover:not(:disabled) {
      background: $color-accent;
      border-color: $color-accent;
      color: white;
    }
    
    &:disabled {
      opacity: 0.4;
      cursor: not-allowed;
    }
    
    .material-symbols-outlined {
      font-size: 1.25rem;
    }
  }
  
  .skill-level {
    min-width: 28px;
    text-align: center;
    font-weight: 700;
    font-size: 1.1rem;
    color: $color-text-primary;
  }
  
  .skill-bonus {
    display: flex;
    align-items: center;
    gap: 0.25rem;
    padding: 0.25rem 0.5rem;
    background: rgba($color-success, 0.15);
    border-radius: $radius-sm;
    color: $color-success;
    font-size: 0.8rem;
    font-weight: 500;
    
    .material-symbols-outlined {
      font-size: 0.9rem;
    }
  }
}

// ============================================================================
// MAGIC SECTION
// ============================================================================

.magic-college {
  margin-bottom: 2rem;
  padding: 1.5rem;
  background: $color-bg-elevated;
  border-radius: $radius-lg;
  border: 1px solid $color-border;
  
  &.cosmic {
    border-left: 4px solid $color-cosmic;
    
    .college-title { color: $color-cosmic; }
    .focus-card.has-levels { border-color: rgba($color-cosmic, 0.5); }
  }
  
  &.earthly {
    border-left: 4px solid $color-earthly;
    
    .college-title { color: $color-earthly; }
    .focus-card.has-levels { border-color: rgba($color-earthly, 0.5); }
  }
  
  &.dead {
    border-left: 4px solid $color-dead;
    
    .college-title { color: $color-dead; }
    .focus-card.has-levels { border-color: rgba($color-dead, 0.5); }
  }
}

.college-title {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  font-family: $font-display;
  font-size: 1.25rem;
  font-weight: 600;
  margin: 0 0 1.5rem;
  
  .college-icon {
    font-size: 1.5rem;
  }
}

.magic-school {
  margin-bottom: 1.5rem;
  
  &:last-child {
    margin-bottom: 0;
  }
  
  .school-title {
    font-size: 0.95rem;
    font-weight: 600;
    color: $color-text-secondary;
    margin: 0 0 0.75rem;
    padding-left: 0.5rem;
    border-left: 2px solid $color-border;
  }
}

.focuses-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
  gap: 0.75rem;
}

.focus-card {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0.75rem 1rem;
  background: $color-bg-card;
  border: 1px solid $color-border;
  border-radius: $radius-md;
  transition: all $transition-fast;
  
  &.has-levels {
    background: rgba($color-accent, 0.05);
  }
  
  .focus-name {
    font-size: 0.9rem;
    color: $color-text-primary;
  }
  
  .focus-controls {
    display: flex;
    align-items: center;
    gap: 0.35rem;
  }
  
  .focus-btn {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 26px;
    height: 26px;
    background: $color-bg-elevated;
    border: 1px solid $color-border;
    border-radius: $radius-sm;
    color: $color-text-secondary;
    cursor: pointer;
    transition: all $transition-fast;
    
    &:hover:not(:disabled) {
      background: $color-accent;
      border-color: $color-accent;
      color: white;
    }
    
    &:disabled {
      opacity: 0.4;
      cursor: not-allowed;
    }
    
    .material-symbols-outlined {
      font-size: 1rem;
    }
  }
  
  .focus-level {
    min-width: 24px;
    text-align: center;
    font-weight: 700;
    font-size: 1rem;
    color: $color-text-primary;
  }
}

// ============================================================================
// ABILITIES SECTION
// ============================================================================

.ability-filters {
  display: flex;
  flex-wrap: wrap;
  gap: 1rem;
  margin-bottom: 1.5rem;
  padding-bottom: 1.5rem;
  border-bottom: 1px solid $color-border;
  
  .search-box {
    flex: 1;
    min-width: 200px;
    display: flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.5rem 1rem;
    background: $color-bg-elevated;
    border: 1px solid $color-border;
    border-radius: $radius-md;
    
    .material-symbols-outlined {
      color: $color-text-muted;
    }
    
    input {
      flex: 1;
      background: none;
      border: none;
      color: $color-text-primary;
      font-size: 0.95rem;
      
      &::placeholder {
        color: $color-text-muted;
      }
      
      &:focus {
        outline: none;
      }
    }
  }
  
  .filter-buttons {
    display: flex;
    gap: 0.5rem;
  }
  
  .filter-btn {
    padding: 0.5rem 1rem;
    background: $color-bg-elevated;
    border: 1px solid $color-border;
    border-radius: $radius-md;
    color: $color-text-secondary;
    font-size: 0.875rem;
    cursor: pointer;
    transition: all $transition-fast;
    
    &:hover {
      border-color: $color-border-light;
    }
    
    &.active {
      background: $color-accent;
      border-color: $color-accent;
      color: white;
    }
    
    &.cosmic.active {
      background: $color-cosmic;
      border-color: $color-cosmic;
    }
    
    &.earthly.active {
      background: $color-earthly;
      border-color: $color-earthly;
    }
    
    &.dead.active {
      background: $color-dead;
      border-color: $color-dead;
    }
  }
}

.selected-abilities-summary {
  margin-bottom: 1.5rem;
  padding: 1rem;
  background: rgba($color-accent, 0.05);
  border: 1px solid rgba($color-accent, 0.2);
  border-radius: $radius-md;
  
  h4 {
    font-size: 0.9rem;
    font-weight: 600;
    color: $color-text-secondary;
    margin: 0 0 0.75rem;
  }
  
  .selected-tags {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
  }
  
  .ability-tag {
    display: inline-flex;
    align-items: center;
    gap: 0.35rem;
    padding: 0.35rem 0.75rem;
    background: $color-bg-elevated;
    border-radius: $radius-sm;
    font-size: 0.85rem;
    color: $color-text-primary;
    
    &.cosmic { border-left: 3px solid $color-cosmic; }
    &.earthly { border-left: 3px solid $color-earthly; }
    &.dead { border-left: 3px solid $color-dead; }
    
    button {
      display: flex;
      padding: 0;
      background: none;
      border: none;
      color: $color-text-muted;
      cursor: pointer;
      
      &:hover {
        color: $color-danger;
      }
      
      .material-symbols-outlined {
        font-size: 1rem;
      }
    }
  }
}

.abilities-list {
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
  max-height: 500px;
  overflow-y: auto;
  padding-right: 0.5rem;
  
  &::-webkit-scrollbar {
    width: 6px;
  }
  
  &::-webkit-scrollbar-track {
    background: $color-bg-elevated;
    border-radius: 3px;
  }
  
  &::-webkit-scrollbar-thumb {
    background: $color-border;
    border-radius: 3px;
    
    &:hover {
      background: $color-border-light;
    }
  }
}

.ability-card {
  background: $color-bg-elevated;
  border: 1px solid $color-border;
  border-radius: $radius-md;
  overflow: hidden;
  transition: all $transition-fast;
  
  &.selected {
    border-color: $color-accent;
    box-shadow: 0 0 0 1px rgba($color-accent, 0.3);
  }
  
  &.cosmic { border-left: 3px solid $color-cosmic; }
  &.earthly { border-left: 3px solid $color-earthly; }
  &.dead { border-left: 3px solid $color-dead; }
  
  .ability-header {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    padding: 0.75rem 1rem;
    cursor: pointer;
    
    &:hover {
      background: rgba(255, 255, 255, 0.02);
    }
  }
  
  .ability-main {
    flex: 1;
    display: flex;
    align-items: center;
    gap: 0.75rem;
    min-width: 0;
  }
  
  .select-btn {
    display: flex;
    padding: 0;
    background: none;
    border: none;
    color: $color-text-muted;
    cursor: pointer;
    transition: color $transition-fast;
    
    &:hover:not(:disabled) {
      color: $color-accent;
    }
    
    &:disabled {
      opacity: 0.4;
      cursor: not-allowed;
    }
    
    .material-symbols-outlined {
      font-size: 1.5rem;
    }
  }
  
  &.selected .select-btn {
    color: $color-success;
  }
  
  .ability-name {
    font-weight: 600;
    color: $color-text-primary;
  }
  
  .ability-focus {
    font-size: 0.8rem;
    color: $color-text-muted;
    text-transform: capitalize;
  }
  
  .ability-costs {
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }
  
  .cost-badge {
    display: inline-flex;
    align-items: center;
    gap: 0.25rem;
    padding: 0.2rem 0.5rem;
    border-radius: $radius-sm;
    font-size: 0.75rem;
    font-weight: 500;
    
    &.ap {
      background: rgba($color-warning, 0.15);
      color: $color-warning;
    }
    
    &.component {
      background: rgba($color-cosmic, 0.15);
      color: $color-cosmic;
      
      .material-symbols-outlined {
        font-size: 0.9rem;
      }
    }
  }
  
  .expand-icon {
    color: $color-text-muted;
    transition: transform $transition-fast;
  }
  
  &.expanded .expand-icon {
    transform: rotate(180deg);
  }
  
  .ability-details {
    padding: 1rem;
    background: rgba(0, 0, 0, 0.2);
    border-top: 1px solid $color-border;
    
    .ability-description {
      color: $color-text-secondary;
      font-size: 0.9rem;
      line-height: 1.5;
      margin: 0 0 1rem;
    }
    
    .ability-meta {
      display: flex;
      flex-wrap: wrap;
      gap: 1rem;
      font-size: 0.85rem;
      color: $color-text-muted;
      margin-bottom: 0.75rem;
      
      strong {
        color: $color-text-secondary;
      }
    }
    
    .ability-output {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.5rem 0.75rem;
      border-radius: $radius-sm;
      font-size: 0.85rem;
      
      &.damage {
        background: rgba($color-danger, 0.1);
        color: $color-danger;
      }
      
      &.healing {
        background: rgba($color-success, 0.1);
        color: $color-success;
      }
      
      .material-symbols-outlined {
        font-size: 1rem;
      }
    }
  }
}

.empty-state {
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 3rem 2rem;
  text-align: center;
  
  .material-symbols-outlined {
    font-size: 3rem;
    color: $color-text-muted;
    margin-bottom: 1rem;
  }
  
  p {
    color: $color-text-secondary;
    margin: 0;
  }
  
  .hint {
    font-size: 0.9rem;
    color: $color-text-muted;
    margin-top: 0.5rem;
  }
}

// ============================================================================
// EQUIPMENT SECTION
// ============================================================================

.equipment-tabs {
  display: flex;
  gap: 0.5rem;
  margin-bottom: 1.5rem;
  padding-bottom: 1rem;
  border-bottom: 1px solid $color-border;
  
  .tab-btn {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.75rem 1.25rem;
    background: $color-bg-elevated;
    border: 1px solid $color-border;
    border-radius: $radius-md;
    color: $color-text-secondary;
    font-size: 0.9rem;
    cursor: pointer;
    transition: all $transition-fast;
    
    &:hover {
      border-color: $color-border-light;
    }
    
    &.active {
      background: $color-accent;
      border-color: $color-accent;
      color: white;
    }
    
    .material-symbols-outlined {
      font-size: 1.25rem;
    }
  }
}

.equipment-content {
  h4 {
    font-size: 0.95rem;
    font-weight: 600;
    color: $color-text-secondary;
    margin: 0 0 0.75rem;
  }
}

.selected-equipment {
  margin-bottom: 1.5rem;
  padding: 1rem;
  background: $color-bg-elevated;
  border-radius: $radius-md;
  min-height: 60px;
  
  .no-items {
    color: $color-text-muted;
    font-style: italic;
    margin: 0;
  }
}

.equipment-item {
  display: flex;
  align-items: center;
  gap: 1rem;
  padding: 0.5rem 0;
  
  &:not(:last-child) {
    border-bottom: 1px solid $color-border;
  }
  
  .item-name {
    flex: 1;
    font-weight: 500;
    color: $color-text-primary;
  }
  
  .item-details {
    color: $color-text-muted;
    font-size: 0.85rem;
  }
  
  .item-qty {
    padding: 0.2rem 0.5rem;
    background: rgba($color-accent, 0.15);
    border-radius: $radius-sm;
    font-size: 0.8rem;
    color: $color-accent;
  }
  
  .remove-btn {
    display: flex;
    padding: 0.25rem;
    background: none;
    border: none;
    color: $color-text-muted;
    cursor: pointer;
    
    &:hover {
      color: $color-danger;
    }
    
    .material-symbols-outlined {
      font-size: 1.25rem;
    }
  }
}

.equipment-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
  gap: 0.75rem;
}

.equipment-option {
  padding: 1rem;
  background: $color-bg-elevated;
  border: 1px solid $color-border;
  border-radius: $radius-md;
  cursor: pointer;
  transition: all $transition-fast;
  
  &:hover {
    border-color: $color-accent;
    background: rgba($color-accent, 0.05);
  }
  
  .option-name {
    display: block;
    font-weight: 600;
    color: $color-text-primary;
    margin-bottom: 0.25rem;
  }
  
  .option-details,
  .option-range {
    display: block;
    font-size: 0.8rem;
    color: $color-text-muted;
  }
}

// Armor Slots
.armor-slots {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
  gap: 1rem;
}

.armor-slot {
  padding: 1rem;
  background: $color-bg-elevated;
  border: 1px solid $color-border;
  border-radius: $radius-md;
  
  .slot-name {
    display: block;
    font-weight: 600;
    color: $color-text-secondary;
    margin-bottom: 0.5rem;
    text-transform: uppercase;
    font-size: 0.75rem;
    letter-spacing: 0.05em;
  }
  
  .equipped-armor {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.5rem;
    background: rgba($color-success, 0.1);
    border-radius: $radius-sm;
    margin-bottom: 0.75rem;
    
    span:first-child {
      flex: 1;
      font-size: 0.9rem;
      color: $color-text-primary;
    }
    
    .armor-dr {
      font-size: 0.75rem;
      color: $color-success;
    }
    
    button {
      display: flex;
      padding: 0;
      background: none;
      border: none;
      color: $color-text-muted;
      cursor: pointer;
      
      &:hover {
        color: $color-danger;
      }
      
      .material-symbols-outlined {
        font-size: 1rem;
      }
    }
  }
  
  .empty-slot {
    display: block;
    color: $color-text-muted;
    font-style: italic;
    font-size: 0.85rem;
    margin-bottom: 0.75rem;
  }
  
  .slot-options {
    display: flex;
    flex-direction: column;
    gap: 0.35rem;
  }
  
  .armor-option {
    padding: 0.5rem 0.75rem;
    background: $color-bg-card;
    border: 1px solid $color-border;
    border-radius: $radius-sm;
    color: $color-text-secondary;
    font-size: 0.8rem;
    text-align: left;
    cursor: pointer;
    transition: all $transition-fast;
    
    &:hover {
      border-color: $color-accent;
      color: $color-text-primary;
    }
  }
}

// ============================================================================
// INVENTORY SECTION
// ============================================================================

.currency-section {
  margin-bottom: 2rem;
  
  h4 {
    font-size: 0.95rem;
    font-weight: 600;
    color: $color-text-secondary;
    margin: 0 0 0.75rem;
  }
  
  .currency-inputs {
    display: flex;
    gap: 1rem;
    
    .form-group {
      flex: 1;
      max-width: 200px;
    }
  }
}

.inventory-section {
  margin-bottom: 2rem;
  
  h4 {
    font-size: 0.95rem;
    font-weight: 600;
    color: $color-text-secondary;
    margin: 0 0 0.75rem;
  }
}

.inventory-list {
  padding: 1rem;
  background: $color-bg-elevated;
  border-radius: $radius-md;
  min-height: 60px;
  
  .no-items {
    color: $color-text-muted;
    font-style: italic;
    margin: 0;
  }
}

.inventory-item {
  display: flex;
  align-items: center;
  gap: 1rem;
  padding: 0.5rem 0;
  
  &:not(:last-child) {
    border-bottom: 1px solid $color-border;
  }
  
  .item-name {
    flex: 1;
    font-weight: 500;
    color: $color-text-primary;
  }
  
  .item-qty {
    padding: 0.2rem 0.5rem;
    background: rgba($color-accent, 0.15);
    border-radius: $radius-sm;
    font-size: 0.8rem;
    color: $color-accent;
  }
  
  .item-category {
    font-size: 0.75rem;
    color: $color-text-muted;
    text-transform: uppercase;
  }
  
  button {
    display: flex;
    padding: 0.25rem;
    background: none;
    border: none;
    color: $color-text-muted;
    cursor: pointer;
    
    &:hover {
      color: $color-danger;
    }
    
    .material-symbols-outlined {
      font-size: 1.25rem;
    }
  }
}

.available-items {
  h4 {
    font-size: 0.95rem;
    font-weight: 600;
    color: $color-text-secondary;
    margin: 0 0 0.75rem;
  }
}

.items-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
  gap: 0.75rem;
}

.item-option {
  display: flex;
  align-items: center;
  gap: 1rem;
  padding: 0.75rem 1rem;
  background: $color-bg-elevated;
  border: 1px solid $color-border;
  border-radius: $radius-md;
  
  .item-info {
    flex: 1;
    min-width: 0;
    
    .item-name {
      display: block;
      font-weight: 500;
      color: $color-text-primary;
      margin-bottom: 0.25rem;
    }
    
    .item-desc {
      display: block;
      font-size: 0.8rem;
      color: $color-text-muted;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
  }
  
  .item-actions {
    display: flex;
    gap: 0.35rem;
    
    button {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 32px;
      height: 32px;
      background: $color-bg-card;
      border: 1px solid $color-border;
      border-radius: $radius-sm;
      color: $color-text-secondary;
      cursor: pointer;
      transition: all $transition-fast;
      
      &:hover {
        background: $color-accent;
        border-color: $color-accent;
        color: white;
      }
      
      .material-symbols-outlined {
        font-size: 1.1rem;
      }
    }
  }
}

// ============================================================================
// REVIEW SECTION
// ============================================================================

.review-step {
  .review-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    gap: 1.5rem;
    margin-bottom: 2rem;
  }
}

.review-card {
  padding: 1.25rem;
  background: $color-bg-elevated;
  border: 1px solid $color-border;
  border-radius: $radius-md;
  
  h4 {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 0.95rem;
    font-weight: 600;
    color: $color-text-primary;
    margin: 0 0 1rem;
    padding-bottom: 0.75rem;
    border-bottom: 1px solid $color-border;
    
    .material-symbols-outlined {
      font-size: 1.1rem;
      color: $color-accent;
    }
  }
  
  .review-content {
    p {
      margin: 0 0 0.5rem;
      font-size: 0.9rem;
      color: $color-text-secondary;
      
      strong {
        color: $color-text-primary;
      }
    }
    
    .no-items {
      color: $color-text-muted;
      font-style: italic;
    }
  }
  
  .stats-summary {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
  }
  
  .stat-pill {
    display: inline-block;
    padding: 0.25rem 0.5rem;
    background: $color-bg-card;
    border-radius: $radius-sm;
    font-size: 0.8rem;
    color: $color-text-secondary;
    
    strong {
      color: $color-accent;
    }
  }
  
  .skill-pill,
  .focus-pill,
  .ability-pill {
    display: inline-block;
    padding: 0.25rem 0.6rem;
    background: $color-bg-card;
    border-radius: $radius-sm;
    font-size: 0.8rem;
    color: $color-text-primary;
    margin: 0.25rem;
  }
  
  .focus-pill {
    &.cosmic { border-left: 2px solid $color-cosmic; }
    &.earthly { border-left: 2px solid $color-earthly; }
    &.dead { border-left: 2px solid $color-dead; }
  }
  
  .ability-pill {
    &.cosmic { background: rgba($color-cosmic, 0.15); color: $color-cosmic; }
    &.earthly { background: rgba($color-earthly, 0.15); color: $color-earthly; }
    &.dead { background: rgba($color-dead, 0.15); color: $color-dead; }
  }
}

.download-section {
  text-align: center;
  padding: 2rem;
  background: linear-gradient(135deg, rgba($color-accent, 0.1) 0%, rgba($color-cosmic, 0.05) 100%);
  border-radius: $radius-lg;
  border: 1px solid rgba($color-accent, 0.2);
  
  .download-btn {
    display: inline-flex;
    align-items: center;
    gap: 0.75rem;
    padding: 1rem 2.5rem;
    background: linear-gradient(135deg, $color-accent 0%, darken($color-accent, 10%) 100%);
    border: none;
    border-radius: $radius-md;
    color: white;
    font-size: 1.1rem;
    font-weight: 600;
    cursor: pointer;
    transition: all $transition-normal;
    box-shadow: $shadow-md;
    
    &:hover:not(:disabled) {
      transform: translateY(-2px);
      box-shadow: $shadow-lg, $shadow-glow;
    }
    
    &:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }
    
    .material-symbols-outlined {
      font-size: 1.5rem;
    }
  }
  
  .download-hint {
    margin: 1rem 0 0;
    font-size: 0.85rem;
    color: $color-text-muted;
    
    code {
      padding: 0.2rem 0.5rem;
      background: $color-bg-card;
      border-radius: $radius-sm;
      font-family: 'Fira Code', monospace;
      color: $color-accent;
    }
  }
}

// ============================================================================
// WIZARD FOOTER
// ============================================================================

.wizard-footer {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 1.5rem 2rem;
  background: $color-bg-card;
  border-radius: $radius-lg;
  border: 1px solid $color-border;
  
  .step-counter {
    color: $color-text-muted;
    font-size: 0.9rem;
  }
}

.nav-btn {
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.75rem 1.5rem;
  border-radius: $radius-md;
  font-size: 0.95rem;
  font-weight: 500;
  cursor: pointer;
  transition: all $transition-fast;
  
  .material-symbols-outlined {
    font-size: 1.25rem;
  }
  
  &.secondary {
    background: $color-bg-elevated;
    border: 1px solid $color-border;
    color: $color-text-secondary;
    
    &:hover:not(:disabled) {
      border-color: $color-border-light;
      color: $color-text-primary;
    }
  }
  
  &.primary {
    background: $color-accent;
    border: 1px solid $color-accent;
    color: white;
    
    &:hover:not(:disabled) {
      background: $color-accent-hover;
      border-color: $color-accent-hover;
    }
    
    &.download {
      background: linear-gradient(135deg, $color-success 0%, darken($color-success, 10%) 100%);
      border-color: $color-success;
    }
  }
  
  &:disabled {
    opacity: 0.4;
    cursor: not-allowed;
  }
}

// ============================================================================
// RESPONSIVE
// ============================================================================

@media (max-width: 768px) {
  .wizard-container {
    padding: 1rem;
  }
  
  .step-indicator {
    .step-label {
      display: none;
    }
    
    .step-connector {
      margin-bottom: 0;
    }
  }
  
  .step-content {
    padding: 1.5rem;
  }
  
  .wizard-footer {
    flex-wrap: wrap;
    gap: 1rem;
    
    .step-counter {
      width: 100%;
      text-align: center;
      order: -1;
    }
    
    .nav-btn {
      flex: 1;
      justify-content: center;
    }
  }
  
  .ability-filters {
    flex-direction: column;
    
    .search-box {
      width: 100%;
    }
    
    .filter-buttons {
      width: 100%;
      overflow-x: auto;
      padding-bottom: 0.5rem;
    }
  }
}